<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Quiz Base de Donn√©es</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    .question, #quizForm, #timer { display: none; }
    #timer { font-weight: bold; color: red; margin-bottom: 10px; }
    #score { font-weight: bold; color: green; }
  </style>
</head>
<body>

<h2>Quiz : Base de Donn√©es</h2>

<!-- √âtape 1 : Demande le nom -->
<div id="startScreen">
  <label>Entrez votre pr√©nom : <input type="text" id="username" required></label><br><br>
  <button onclick="startQuiz()">Commencer le quiz</button>
</div>

<!-- Minuteur -->
<p id="timer">Temps restant : 10s</p>

<!-- √âtape 2 : Questions -->
<form id="quizForm">
  <!-- Question 1 -->
  <div class="question" id="q1">
    <p>1. Qu‚Äôest-ce qu‚Äôune base de donn√©es ?</p>
    <label><input type="radio" name="q1" value="a"> Un logiciel de retouche photo</label><br>
    <label><input type="radio" name="q1" value="b"> Un endroit o√π l‚Äôon stocke et organise des donn√©es</label><br>
    <label><input type="radio" name="q1" value="c"> Une page web statique</label><br>
    <label><input type="radio" name="q1" value="d"> Un antivirus</label>
  </div>

  <!-- Question 2 -->
  <div class="question" id="q2">
    <p>2. Quel langage est utilis√© pour interagir avec une base de donn√©es relationnelle ?</p>
    <label><input type="radio" name="q2" value="a"> HTML</label><br>
    <label><input type="radio" name="q2" value="b"> CSS</label><br>
    <label><input type="radio" name="q2" value="c"> SQL</label><br>
    <label><input type="radio" name="q2" value="d"> JavaScript</label>
  </div>

  <!-- Question 3 -->
  <div class="question" id="q3">
    <p>3. Quel est le r√¥le principal de SQL ?</p>
    <label><input type="radio" name="q3" value="a"> Cr√©er des sites web</label><br>
    <label><input type="radio" name="q3" value="b"> Interroger et manipuler des bases de donn√©es</label><br>
    <label><input type="radio" name="q3" value="c"> Dessiner des bases de donn√©es</label><br>
    <label><input type="radio" name="q3" value="d"> Animer des images</label>
  </div>

  <!-- Question 4 -->
  <div class="question" id="q4">
    <p>4. Lequel est un syst√®me de gestion de base de donn√©es ?</p>
    <label><input type="radio" name="q4" value="a"> Photoshop</label><br>
    <label><input type="radio" name="q4" value="b"> MySQL</label><br>
    <label><input type="radio" name="q4" value="c"> VS Code</label><br>
    <label><input type="radio" name="q4" value="d"> Chrome</label>
  </div>

  <!-- Question 5 -->
  <div class="question" id="q5">
    <p>5. Que signifie "relationnelle" dans base de donn√©es relationnelle ?</p>
    <label><input type="radio" name="q5" value="a"> Qu'elle est li√©e √† internet</label><br>
    <label><input type="radio" name="q5" value="b"> Que les donn√©es sont li√©es entre elles</label><br>
    <label><input type="radio" name="q5" value="c"> Qu'elle est lente</label><br>
    <label><input type="radio" name="q5" value="d"> Que c‚Äôest un tableau Excel</label>
  </div>
</form>

<!-- R√©sultat final -->
<p id="score"></p>

<script>
  const questions = ["q1", "q2", "q3", "q4", "q5"];
  const correctAnswers = { q1: "b", q2: "c", q3: "b", q4: "b", q5: "b" };
  let current = 0;
  let score = 0;
  let timer;
  let timeLeft = 10;
  let userName = "";

  function startQuiz() {
    const nameInput = document.getElementById('username').value.trim();
    if (!nameInput) {
      alert("Veuillez entrer votre pr√©nom avant de commencer.");
      return;
    }
    userName = nameInput;
    document.getElementById('startScreen').style.display = 'none';
    document.getElementById('quizForm').style.display = 'block';
    document.getElementById('timer').style.display = 'block';
    showQuestion(current);
  }

  function showQuestion(index) {
    document.querySelectorAll('.question').forEach(q => q.style.display = 'none');
    const currentId = questions[index];
    const qElement = document.getElementById(currentId);
    if (qElement) {
      qElement.style.display = 'block';
      timeLeft = 10;
      document.getElementById('timer').textContent = `Temps restant : ${timeLeft}10`;
      timer = setInterval(() => {
        timeLeft--;
        document.getElementById('timer').textContent = `Temps restant : ${timeLeft}10`;
        if (timeLeft <= 0) {
          clearInterval(timer);
          checkAnswer(currentId);
          current++;
          if (current < questions.length) {
            showQuestion(current);
          } else {
            finishQuiz();
          }
        }
      }, 1000);
    }
  }

  function checkAnswer(qId) {
    const selected = document.querySelector(`input[name="${qId}"]:checked`);
    if (selected && selected.value === correctAnswers[qId]) {
      score++;
    }
  }

  function finishQuiz() {
    document.querySelectorAll('.question').forEach(q => q.style.display = 'none');
    document.getElementById('timer').style.display = 'none';

    // Affichage personnalis√©
    let message = `${userName}, votre score est ${score}/${questions.length}`;
    if (score === questions.length) {
      message += "<br>üèÖ Excellent travail, vous avez tout r√©ussi !";
    } else if (score >= 3) {
      message += "<br>üëç Bien jou√© !";
    } else {
      message += "<br>üìö R√©visez un peu et r√©essayez !";
    }
    document.getElementById('score').innerHTML = `<h3>${message}</h3>`;

    // üîó URL de ton Google Apps Script (√† remplacer)
    const url = 'VOTRE_URL_DU_SCRIPT';

    // Envoi des donn√©es
    fetch(url, {
      method: 'POST',
      mode: 'no-cors',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ nom: userName, score: score, date: new Date().toLocaleString() })
    });
  }
</script>

</body>

</html>
